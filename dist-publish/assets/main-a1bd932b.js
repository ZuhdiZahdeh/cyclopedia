import{g as ze,d as $,a as Ke,b as Et,c as r,_ as N,R as Z,e as q,s as p,r as I,p as E,f as _,l as D,h as O,i as Ye,j as It,k as Ct,m as wt}from"./professions-game-a770cd30.js";async function xt(){const t=await(await fetch("/users/profile.html")).text();document.querySelector("main.main-content").innerHTML=t,$t()}async function $t(){const e=JSON.parse(localStorage.getItem("user")||"{}");document.getElementById("username").value=e.username||"",document.getElementById("language").value=e.language||"en";const t=ze($,"users",e.uid),o=await Ke(t);if(o.exists()){const s=o.data();document.getElementById("points-value").textContent=s.points||0;const a=document.getElementById("activity-log"),n=s.activityLog||{};a.innerHTML="",Object.entries(n).forEach(([i,l])=>{var c,m;const d=document.createElement("li");d.textContent=`${l.action} – ${new Date(((m=(c=l.timestamp)==null?void 0:c.toDate)==null?void 0:m.call(c))||l.timestamp).toLocaleString()}`,a.appendChild(d)})}document.getElementById("profileForm").addEventListener("submit",async s=>{s.preventDefault();const a=document.getElementById("username").value.trim(),n=document.getElementById("language").value;try{await Et(t,{username:a,language:n}),e.username=a,e.language=n,localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("language",n),document.getElementById("statusMsg").textContent="✅ تم تحديث البيانات!"}catch{document.getElementById("statusMsg").textContent="❌ فشل التحديث."}})}let V=[],J=0,v=null;async function Qe(){p();const e=document.querySelector("main.main-content"),t=document.getElementById("animal-sidebar-controls");if(!e||!t){console.error("Main content area or animal sidebar controls not found.");return}e.innerHTML=`
    <div class="game-box">
      <h2 id="animal-word" class="item-main-name"></h2>
      <img id="animal-image" src="" alt="animal" />
      
      <div class="animal-details-section info-box" id="animal-details-section" style="display:none;">
        <h3>تفاصيل إضافية:</h3>
        <ul id="animal-details-list">
          <li><strong>اسم الابناء:</strong> <span id="animal-baby">---</span></li>
          <li><strong>اسم الزوجة:</strong> <span id="animal-female">---</span></li>
          <li><strong>الصنف:</strong> <span id="animal-category">---</span></li>
        </ul>
        <div class="baby-animal-section" style="display:none;">
            <h4>صورة الابن:</h4>
            <img id="baby-animal-image" src="" alt="baby animal" style="max-width: 150px; margin-top: 10px;"/>
        </div>
      </div>
      <div class="animal-description-box info-box" id="animal-description-box" style="display:none;">
        <h4>الوصف:</h4>
        <p id="animal-description">---</p>
      </div>
    </div>
  `;const o=document.getElementById("animal-image"),s=document.getElementById("animal-word"),a=document.getElementById("animal-baby"),n=document.getElementById("animal-female"),i=document.getElementById("animal-category"),l=document.getElementById("animal-description"),d=document.getElementById("baby-animal-image"),c=document.getElementById("game-lang-select-animal");if(!c){console.error("Language select for animal game not found.");return}if(await _t(c.value),V.length===0){console.warn("No animals found for this category and language."),o&&(o.src="/images/default.png"),s&&(s.textContent="لا توجد بيانات"),l&&(l.textContent="لا يوجد وصف متوفر."),a&&(a.textContent="غير متوفر"),n&&(n.textContent="غير متوفر"),i&&(i.textContent="غير متوفر"),d&&(d.src="/images/default.png"),Ne(!0);return}J=0,Se(),Ne(!1);const m=document.getElementById("animal-description-box"),g=document.getElementById("animal-details-section"),y=g.querySelector(".baby-animal-section"),u=document.getElementById("toggle-description-btn"),f=document.getElementById("toggle-details-btn"),C=document.getElementById("toggle-baby-image-btn");u&&m&&(u.onclick=()=>{m.style.display=m.style.display==="none"?"block":"none"}),f&&g&&(f.onclick=()=>{g.style.display=g.style.display==="none"?"block":"none"}),C&&y&&(C.onclick=()=>{y.style.display=y.style.display==="none"?"block":"none"})}function Se(){var c,m,g,y,u,f,C;if(V.length===0)return;v=V[J];const e=document.getElementById("animal-image"),t=document.getElementById("animal-word"),o=document.getElementById("animal-description"),s=document.getElementById("animal-baby"),a=document.getElementById("animal-female"),n=document.getElementById("animal-category"),i=document.getElementById("baby-animal-image"),l=document.getElementById("prev-animal-btn"),d=document.getElementById("next-animal-btn");if(e&&(e.src=`/images/animals/${v.image}`),e&&(e.alt=v.name[r]),t){const x=v.name[r];if(x){const vt=x.charAt(0),Bt=x.substring(1);t.innerHTML=`${vt}${Bt}`}else t.textContent=""}if(o&&(o.textContent=((c=v.description)==null?void 0:c[r])||"لا يوجد وصف"),s&&(s.textContent=((m=v.baby)==null?void 0:m[r])||"غير معروف"),a&&(a.textContent=((g=v.female)==null?void 0:g[r])||"غير معروف"),n&&(n.textContent=Array.isArray(v.classification)?v.classification.map(x=>typeof x=="object"&&x!==null&&x[r]?x[r]:x).join(", "):((y=v.classification)==null?void 0:y[r])||"غير معروف"),i){const x=(u=v.baby)==null?void 0:u.image_path;x?(i.src=`/${x}`,i.alt=((C=(f=v.baby)==null?void 0:f.name)==null?void 0:C[r])||"baby animal"):(i.src="/images/default.png",i.alt="No baby animal image available")}l&&(l.disabled=J===0),d&&(d.disabled=J===V.length-1),p()}async function _t(e){try{const t=N($,"categories","animals","items"),o=Z(t);V=(await q(o)).docs.map(a=>a.data()),console.log("Fetched animals:",V)}catch(t){console.error("Error fetching animals from Firestore:",t),V=[]}}function St(){p(),J<V.length-1&&(J++,Se(),I(JSON.parse(localStorage.getItem("user")),"animals"))}function kt(){p(),J>0&&(J--,Se(),I(JSON.parse(localStorage.getItem("user")),"animals"))}function Lt(){if(v){const e=document.getElementById("voice-select-animal"),t=e?e.value:"boy",o=Tt(v,t);o&&(E(o),I(JSON.parse(localStorage.getItem("user")),"animals"))}else console.warn("لا يوجد حيوان معروض لتشغيل الصوت.")}function Pt(){if(v&&v.baby){const e=document.getElementById("voice-select-animal"),t=e?e.value:"boy",o=At(v.baby,t);o&&(E(o),I(JSON.parse(localStorage.getItem("user")),"animals_baby_audio"))}else console.warn("لا توجد بيانات لاسم ابن الحيوان لتشغيل الصوت.")}function Tt(e,t){var l;const o=document.getElementById("game-lang-select-animal").value,s="animals";let a;const n=`${t}_${o}`;if(e.voices&&e.voices[n])a=e.voices[n],console.log(`✅ Found in voices: ${n} → ${a}`);else if(e.sound_base)a=`${e.sound_base}_${t}_${o}.mp3`,console.warn(`⚠️ Used fallback from sound_base: ${a}`);else return console.error(`❌ Neither voices nor sound_base available for ${((l=e.name)==null?void 0:l[r])||"unknown"}`),null;const i=`/audio/${o}/${s}/${a}`;return console.log(`🎧 Full audio path: ${i}`),i}function At(e,t){var l;const o=document.getElementById("game-lang-select-animal").value,s="animals/baby_animals";let a;const n=t;if(e.sound&&e.sound[o]&&e.sound[o][n])a=e.sound[o][n].split("/").pop(),console.log(`✅ Found in baby voices: ${o} → ${n} → ${a}`);else return console.error(`❌ Baby animal sound not available for ${((l=e.name)==null?void 0:l[r])||"unknown"} in ${o} for voice type ${n}`),null;const i=`/audio/${o}/${s}/${a}`;return console.log(`🎧 Full baby animal audio path: ${i}`),i}function Ne(e){const t=document.getElementById("play-sound-btn-animal"),o=document.getElementById("next-animal-btn"),s=document.getElementById("prev-animal-btn"),a=document.getElementById("voice-select-animal"),n=document.getElementById("game-lang-select-animal"),i=document.getElementById("play-baby-sound-btn-animal"),l=document.getElementById("toggle-baby-image-btn");t&&(t.disabled=e),o&&(o.disabled=e),s&&(s.disabled=e),a&&(a.disabled=e),n&&(n.disabled=e),i&&(i.disabled=e),l&&(l.disabled=e)}let T=[],L=0,we=null;async function ke(){p();const e=document.querySelector("main.main-content"),t=document.getElementById("fruit-sidebar-controls");if(!e||!t){console.error("Main content area or fruit sidebar controls not found.");return}e.innerHTML=`
        <div class="game-box">
            <h2 id="fruit-name-ar" class="item-main-name">---</h2>
            <img id="fruit-image" src="" alt="Fruit" />
            <div class="info-box"> <h4>الوصف:</h4>
                <p id="fruit-description-ar" class="fruit-description-ar"></p>
                <p id="fruit-description-en" class="fruit-description-en"></p>
            </div>
            <div class="navigation-buttons">
                <button id="prev-fruit-btn" class="nav-button">السابق</button>
                <button id="next-fruit-btn" class="nav-button">التالي</button>
            </div>
        </div>
    `,t.innerHTML=`
        <div class="sidebar-game-controls">
            <div class="control-group">
                <label for="game-lang-select-fruit">لغة اللعبة:</label>
                <select id="game-lang-select-fruit"></select>
            </div>
            <div class="control-group">
                <label for="voice-select-fruit">نوع الصوت:</label>
                <select id="voice-select-fruit"></select>
            </div>
            <button id="play-sound-btn-fruit" class="action-button">تشغيل الصوت</button>
            <button id="view-all-fruits-btn" class="action-button">عرض كل الفواكه</button>
        </div>
    `,Ft(document.getElementById("game-lang-select-fruit"),document.getElementById("voice-select-fruit"),document.getElementById("play-sound-btn-fruit"),document.getElementById("next-fruit-btn"),document.getElementById("prev-fruit-btn"),ke,De,Ze,Xe);try{const o=Z(N($,"categories","fruits","items"));T=(await q(o)).docs.map(a=>({id:a.id,...a.data()})),console.log(`✅ تم تحميل ${T.length} عنصر من مجموعة الفواكه.`),T.length>0?(console.table(T.map(a=>{var n;return{id:a.id,name_ar:(n=a.name)==null?void 0:n.ar,image:a.image,sound_base:a.sound_base,voices:a.voices?Object.keys(a.voices):[]}})),L=0,Le(T[L]),Ie(!1)):(e.innerHTML='<p class="info-message">لا توجد فواكه متاحة حالياً.</p>',Ie(!0))}catch(o){console.error("❌ خطأ أثناء تحميل بيانات الفواكه:",o),e.innerHTML='<p class="error-message">حدث خطأ أثناء تحميل بيانات الفواكه. يرجى المحاولة لاحقاً.</p>',Ie(!0)}}function Le(e){var d,c,m,g,y;we=e;const t=document.getElementById("fruit-name-ar"),o=document.getElementById("fruit-name-en"),s=document.getElementById("fruit-image"),a=document.getElementById("fruit-description-ar"),n=document.getElementById("fruit-description-en");t&&(t.innerText=((d=e.name)==null?void 0:d.ar)||"---"),o&&(o.innerText=((c=e.name)==null?void 0:c.en)||"---"),s&&e.image&&(s.src=`/images/fruits/${e.image}`,s.alt=((m=e.name)==null?void 0:m.en)||"Fruit image"),a&&(a.innerText=((g=e.description)==null?void 0:g.ar)||"---"),n&&(n.innerText=((y=e.description)==null?void 0:y.en)||"---");const i=document.getElementById("next-fruit-btn"),l=document.getElementById("prev-fruit-btn");i&&(i.disabled=L>=T.length-1),l&&(l.disabled=L<=0),_()}function Xe(){p(),L<T.length-1&&(L++,Le(T[L]))}function Ze(){p(),L>0&&(L--,Le(T[L]))}function De(){if(we){const e=document.getElementById("voice-select-fruit").value,t=Mt(we,e);t&&(E(t),I(JSON.parse(localStorage.getItem("user")),"fruits"))}else console.warn("⚠️ لا توجد فاكهة معروضة لتشغيل الصوت.")}function Mt(e,t){var l;const o=document.getElementById("game-lang-select-fruit").value,s="fruits",a=`${t}_${o}`;let n;if(e.voices&&e.voices[a])n=e.voices[a],console.log(`✅ Found voice file: ${a} → ${n}`);else if(e.sound_base)n=`${e.sound_base}_${t}_${o}.mp3`,console.warn(`⚠️ Used fallback from sound_base: ${n}`);else return console.error(`❌ No voice or sound_base for: ${(l=e.name)==null?void 0:l[r]}`),null;const i=`/audio/${o}/${s}/${n}`;return console.log(`🎧 Full audio path: ${i}`),i}function Ie(e){const t=document.getElementById("play-sound-btn-fruit"),o=document.getElementById("next-fruit-btn"),s=document.getElementById("prev-fruit-btn"),a=document.getElementById("voice-select-fruit"),n=document.getElementById("game-lang-select-fruit");t&&(t.disabled=e),o&&(o.disabled=e),s&&(s.disabled=e),a&&(a.disabled=e),n&&(n.disabled=e)}function Ft(e,t,o,s,a,n,i,l,d){e&&e.options.length===0?(["ar","en","he"].forEach(c=>{const m=document.createElement("option");m.value=c,m.textContent={ar:"العربية",en:"English",he:"עברית"}[c],e.appendChild(m)}),e.value=r):e&&(e.value=r),t&&t.options.length===0&&(["teacher","boy","girl","child"].forEach(c=>{const m=document.createElement("option");m.value=c,m.textContent={teacher:"المعلم",boy:"صوت ولد",girl:"صوت بنت",child:"صوت طفل"}[c],t.appendChild(m)}),t.value="teacher"),e.onchange=async()=>{const c=e.value;await D(c),_(),O(c),await n()},o&&(o.onclick=()=>{i()}),a&&(a.onclick=()=>{l()}),s&&(s.onclick=()=>{d()})}let A=[],P=0,xe=null;async function Pe(){p();const e=document.querySelector("main.main-content"),t=document.getElementById("vegetable-sidebar-controls");if(!e||!t){console.error("❌ Main content area or vegetable sidebar controls not found.");return}e.innerHTML=`
    <div class="game-box">
      <h2 id="vegetable-word" class="item-main-name">---</h2>
      <img id="vegetable-image" src="" alt="vegetable" />
      
      <div class="vegetable-details-section info-box">
        <h3>حقائق عن الخضروات:</h3>
        <ul id="vegetable-details-list">
          <li><strong>الصنف:</strong> <span id="vegetable-type">---</span></li>
          <li><strong>الفوائد:</strong> <span id="vegetable-benefits">---</span></li>
        </ul>
      </div>

      <div class="navigation-buttons">
        <button id="prev-vegetable-btn" class="nav-button">السابق</button>
        <button id="next-vegetable-btn" class="nav-button">التالي</button>
      </div>
    </div>
  `,t.innerHTML=`
    <div class="sidebar-game-controls">
        <div class="control-group">
            <label for="game-lang-select-vegetable">لغة اللعبة:</label>
            <select id="game-lang-select-vegetable"></select>
        </div>
        <div class="control-group">
            <label for="voice-select-vegetable">نوع الصوت:</label>
            <select id="voice-select-vegetable"></select>
        </div>
        <button id="play-sound-btn-vegetable" class="action-button">تشغيل الصوت</button>
        <button id="view-all-vegetables-btn" class="action-button">عرض كل الخضروات</button>
    </div>
  `,Nt(document.getElementById("game-lang-select-vegetable"),document.getElementById("voice-select-vegetable"),document.getElementById("play-sound-btn-vegetable"),document.getElementById("next-vegetable-btn"),document.getElementById("prev-vegetable-btn"),Pe,nt,tt,et);try{const o=Z(N($,"categories","vegetables","items"));A=(await q(o)).docs.map(a=>({id:a.id,...a.data()})),console.log(`✅ تم تحميل ${A.length} خضروات.`),console.table(A.map(a=>{var n;return{id:a.id,name_ar:(n=a.name)==null?void 0:n.ar,image:a.image,sound_base:a.sound_base,voices:a.voices?Object.keys(a.voices):[]}})),A.length>0?(P=0,Te(A[P]),Ce(!1)):(e.innerHTML='<p class="info-message">لا توجد خضروات متاحة حالياً.</p>',Ce(!0))}catch(o){console.error("❌ خطأ أثناء تحميل بيانات الخضروات:",o),e.innerHTML='<p class="error-message">حدث خطأ أثناء تحميل بيانات الخضروات. يرجى المحاولة لاحقاً.</p>',Ce(!0)}}function Te(e){var l,d,c,m;xe=e;const t=document.getElementById("vegetable-word"),o=document.getElementById("vegetable-image"),s=document.getElementById("vegetable-type"),a=document.getElementById("vegetable-benefits");t&&(t.innerText=((l=e.name)==null?void 0:l[r])||"---"),o&&e.image&&(o.src=`/images/vegetables/${e.image}`,o.alt=((d=e.name)==null?void 0:d.en)||"Vegetable image"),s&&(s.innerText=((c=e.type)==null?void 0:c[r])||"---"),a&&(a.innerText=((m=e.benefits)==null?void 0:m[r])||"---");const n=document.getElementById("next-vegetable-btn"),i=document.getElementById("prev-vegetable-btn");n&&(n.disabled=P>=A.length-1),i&&(i.disabled=P<=0),_()}function et(){p(),P<A.length-1&&(P++,Te(A[P]))}function tt(){p(),P>0&&(P--,Te(A[P]))}function nt(){if(xe){const e=document.getElementById("voice-select-vegetable").value,t=Ht(xe,e);t&&(E(t),I(JSON.parse(localStorage.getItem("user")),"vegetables"))}else console.warn("⚠️ لا توجد خضروات معروضة لتشغيل الصوت.")}function Ht(e,t){var l;const o=document.getElementById("game-lang-select-vegetable").value,s="vegetables",a=`${t}_${o}`;let n;if(e.voices&&e.voices[a])n=e.voices[a],console.log(`✅ Found voice: ${a} → ${n}`);else if(e.sound_base)n=`${e.sound_base}_${t}_${o}.mp3`,console.warn(`⚠️ Used fallback from sound_base: ${n}`);else return console.error(`❌ لا يوجد مسار صوتي لـ ${(l=e.name)==null?void 0:l[r]}`),null;const i=`/audio/${o}/${s}/${n}`;return console.log(`🎧 Full audio path: ${i}`),i}function Ce(e){const t=document.getElementById("play-sound-btn-vegetable"),o=document.getElementById("next-vegetable-btn"),s=document.getElementById("prev-vegetable-btn"),a=document.getElementById("voice-select-vegetable"),n=document.getElementById("game-lang-select-vegetable");t&&(t.disabled=e),o&&(o.disabled=e),s&&(s.disabled=e),a&&(a.disabled=e),n&&(n.disabled=e)}function Nt(e,t,o,s,a,n,i,l,d){e&&e.options.length===0?(["ar","en","he"].forEach(c=>{const m=document.createElement("option");m.value=c,m.textContent={ar:"العربية",en:"English",he:"עברית"}[c],e.appendChild(m)}),e.value=r):e&&(e.value=r),t&&t.options.length===0&&(["teacher","boy","girl","child"].forEach(c=>{const m=document.createElement("option");m.value=c,m.textContent={teacher:"المعلم",boy:"صوت ولد",girl:"صوت بنت",child:"صوت طفل"}[c],t.appendChild(m)}),t.value="teacher"),e.onchange=async()=>{const c=e.value;await D(c),_(),O(c),await n()},o&&(o.onclick=()=>{i()}),a&&(a.onclick=()=>{l()}),s&&(s.onclick=()=>{d()})}let j=[],M=0,S=null;async function ot(){p();const e=document.querySelector("main.main-content"),t=document.getElementById("human-body-sidebar-controls");if(!e||!t){console.error("Main content area or human body sidebar controls not found.");return}e.innerHTML=`
    <div class="game-box">
      <h2 id="human-body-word" class="item-main-name">---</h2>
      <img id="human-body-image" src="" alt="human body part" />
      
      <div class="human-body-details-section info-box">
        <h3>حقائق عن جسم الإنسان:</h3>
        <ul id="human-body-details-list">
          <li><strong>الوظيفة:</strong> <span id="human-body-function">---</span></li>
          <li><strong>الجهاز:</strong> <span id="human-body-system">---</span></li>
          <li><strong>حقيقة ممتعة:</strong> <span id="human-body-fun-fact">---</span></li>
        </ul>
        <div class="human-body-description-box info-box">
          <h4>الوصف:</h4>
          <p id="human-body-description">---</p>
        </div>
      </div>
    </div>
  `;const o=document.getElementById("human-body-image"),s=document.getElementById("human-body-word"),a=document.getElementById("human-body-function"),n=document.getElementById("human-body-system"),i=document.getElementById("human-body-fun-fact"),l=document.getElementById("human-body-description"),d=document.getElementById("game-lang-select-human-body");if(!d){console.error("Language select for human body game not found.");return}if(d.addEventListener("change",async()=>{p(),await qe(d.value),M=0,re(),_(),O(d.value)}),await qe(d.value),j.length===0){console.warn("No human body parts found. Please check Firestore data or rules."),o&&(o.src="/images/default.png"),s&&(s.textContent="لا توجد بيانات"),l&&(l.textContent="لا يوجد وصف متوفر."),a&&(a.textContent="غير متوفر"),n&&(n.textContent="غير متوفر"),i&&(i.textContent="غير متوفر"),Oe(!0);return}M=0,re(),Oe(!1)}function re(){var m,g,y,u,f,C;if(j.length===0)return;S=j[M];const e=document.getElementById("human-body-image"),t=document.getElementById("human-body-word"),o=document.getElementById("human-body-function"),s=document.getElementById("human-body-system"),a=document.getElementById("human-body-fun-fact"),n=document.getElementById("human-body-description"),i=document.getElementById("prev-human-body-btn"),l=document.getElementById("next-human-body-btn"),d=((m=S.name)==null?void 0:m[r])||((g=S.name)==null?void 0:g.en)||"---",c=`/images/human-body/${S.image}`;e&&(e.src=c),e&&(e.alt=d),t&&(t.textContent=d),o&&(o.textContent=((y=S.function)==null?void 0:y[r])||"غير متوفر"),s&&(s.textContent=((u=S.system)==null?void 0:u[r])||"غير متوفر"),a&&(a.textContent=((f=S.fun_fact)==null?void 0:f[r])||"لا توجد حقائق ممتعة"),n&&(n.textContent=((C=S.description)==null?void 0:C[r])||"لا يوجد وصف"),i&&(i.disabled=M===0),l&&(l.disabled=M===j.length-1),p()}async function qe(e){try{const t=N($,"categories","human-body","items"),o=Z(t);j=(await q(t)).docs.map(a=>a.data()),console.log("Fetched human body parts:",j)}catch(t){console.error("Error fetching human body parts from Firestore:",t),j=[]}}function qt(){p(),M<j.length-1&&(M++,re(),I(JSON.parse(localStorage.getItem("user")),"human-body"))}function Ot(){p(),M>0&&(M--,re(),I(JSON.parse(localStorage.getItem("user")),"human-body"))}function Gt(){if(S){const e=document.getElementById("voice-select-human-body"),t=e?e.value:"boy",o=Vt(S,t);o&&(E(o),I(JSON.parse(localStorage.getItem("user")),"human-body"))}else console.warn("لا يوجد جزء جسم بشري معروض لتشغيل الصوت.")}function Vt(e,t){var n;const o=document.getElementById("game-lang-select-human-body").value,s="human-body";let a;if(e.voices&&e.voices[t])a=e.voices[t];else if(e.sound_base)a=`${e.sound_base}_${t}_${o}.mp3`;else return console.warn(`لا يوجد مسار صوت لـ ${(n=e.name)==null?void 0:n[r]} بنوع الصوت ${t}.`),null;return`/audio/${o}/${s}/${a}`}function Oe(e){const t=document.getElementById("play-sound-btn-human-body"),o=document.getElementById("next-human-body-btn"),s=document.getElementById("prev-human-body-btn"),a=document.getElementById("voice-select-human-body"),n=document.getElementById("game-lang-select-human-body");t&&(t.disabled=e),o&&(o.disabled=e),s&&(s.disabled=e),a&&(a.disabled=e),n&&(n.disabled=e)}let U=[],W=0,G=null;async function Ae(){p();const e=document.querySelector("main.main-content");if(!e){console.error("Main content area not found.");return}e.innerHTML=`
    <div class="game-box">
      <h2 id="tool-name" class="item-main-name"></h2>
      <img id="tool-image" src="" alt="tool" />

      <div class="tool-description-box info-box" id="tool-description-box" style="display:none;">
        <h4>الوصف:</h4>
        <p id="tool-description">---</p>
        <p><strong>المهن المرتبطة:</strong> <span id="tool-professions"></span></p>
      </div>
    </div>
  `;const t=document.getElementById("game-lang-select-tools");document.getElementById("voice-select-tools");const o=document.getElementById("play-sound-btn-tools"),s=document.getElementById("prev-tools-btn"),a=document.getElementById("next-tools-btn"),n=document.getElementById("toggle-description-btn-tools");if(await Jt(),U.length===0){console.warn("No tools found."),document.getElementById("tool-name").textContent="لا توجد بيانات",document.getElementById("tool-description").textContent="غير متوفر.",document.getElementById("tool-image").src="/images/default.png",Ge(!0);return}W=0,Me(),Ge(!1),t.onchange=async()=>{const i=t.value;await D(i),_(),O(i),await Ae()},o&&(o.onclick=()=>{it()}),s&&(s.onclick=()=>{st()}),a&&(a.onclick=()=>{at()}),n&&(n.onclick=()=>{const i=document.getElementById("tool-description-box");i.style.display=i.style.display==="none"?"block":"none"}),_(),O(t.value)}function Me(){var i,l,d;if(U.length===0)return;G=U[W];const e=document.getElementById("tool-name"),t=document.getElementById("tool-description"),o=document.getElementById("tool-professions"),s=document.getElementById("tool-image"),a=s.parentElement;s.remove(),e.textContent=((i=G.name)==null?void 0:i[r])||"",t.textContent=((l=G.description)==null?void 0:l[r])||"لا يوجد وصف.",o.textContent=(G.professions||[]).map(c=>jt(c)).join("، ");const n=document.createElement("img");n.id="tool-image",n.src=`/${G.image_path}`,n.alt=((d=G.name)==null?void 0:d[r])||"",a.insertBefore(n,a.children[1]),document.getElementById("prev-tools-btn").disabled=W===0,document.getElementById("next-tools-btn").disabled=W===U.length-1,p()}async function Jt(){try{const e=N($,"profession_tools"),t=Z(e);U=(await q(t)).docs.map(s=>s.data())}catch(e){console.error("Error fetching tools from Firestore:",e),U=[]}}function at(){p(),W<U.length-1&&(W++,Me(),I(JSON.parse(localStorage.getItem("user")),"tools"))}function st(){p(),W>0&&(W--,Me(),I(JSON.parse(localStorage.getItem("user")),"tools"))}function it(){var e,t;if(G){const o=document.getElementById("voice-select-tools").value,s=document.getElementById("game-lang-select-tools").value,a=(t=(e=G.sound)==null?void 0:e[s])==null?void 0:t[o];if(!a){console.error("Audio not available for this tool/voice/lang");return}const n=`/${a}`;E(n),I(JSON.parse(localStorage.getItem("user")),"tools_audio")}else console.warn("No tool selected for audio playback.")}function Ge(e){["play-sound-btn-tools","prev-tools-btn","next-tools-btn","toggle-description-btn-tools","game-lang-select-tools","voice-select-tools"].forEach(t=>{const o=document.getElementById(t);o&&(o.disabled=e)})}function jt(e){var o;return((o={Blacksmith:{ar:"حداد",en:"Blacksmith",he:"נפח"},Baker:{ar:"خباز",en:"Baker",he:"אופה"},Cook:{ar:"طباخ",en:"Cook",he:"טבח"},Policeman:{ar:"شرطي",en:"Policeman",he:"שוטר"},Engineer:{ar:"مهندس",en:"Engineer",he:"מהנדס"},Architect:{ar:"معماري",en:"Architect",he:"אדריכל"},Teacher:{ar:"معلم",en:"Teacher",he:"מורה"},Doctor:{ar:"طبيب",en:"Doctor",he:"רופא"},Nurse:{ar:"ممرضة",en:"Nurse",he:"אחות"},Carpenter:{ar:"نجار",en:"Carpenter",he:"נגר"},Photographer:{ar:"مصور",en:"Photographer",he:"צלם"},Artist:{ar:"فنان",en:"Artist",he:"אמן"},Mechanic:{ar:"ميكانيكي",en:"Mechanic",he:"מכונאי"},Plumber:{ar:"سباك",en:"Plumber",he:"אינסטלטור"},Electrician:{ar:"كهربائي",en:"Electrician",he:"חשמלאי"},Farmer:{ar:"مزارع",en:"Farmer",he:"חקלאי"},Construction_worker:{ar:"عامل بناء",en:"Construction Worker",he:"פועל בניין"},Driver:{ar:"سائق",en:"Driver",he:"נהג"},Barber:{ar:"حلاق",en:"Barber",he:"ספר"},Tailor:{ar:"خياط",en:"Tailor",he:"חייט"},Welder:{ar:"لحام",en:"Welder",he:"רתך"}}[e])==null?void 0:o[r])||e}let ae=[],de=null,F="animals",ve="teacher";const Wt={ar:["أ","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي"],en:[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"],he:["א","ב","ג","ד","ה","ו","ז","ח","ט","י","כ","ל","מ","נ","ס","ע","פ","צ","ק","ר","ש","ת"]},Ve=[{id:"animals",name_ar:"حيوانات",name_en:"Animals",name_he:"חיות"},{id:"fruits",name_ar:"فواكه",name_en:"Fruits",name_he:"פירות"},{id:"vegetables",name_ar:"خضروات",name_en:"Vegetables",name_he:"ירקות"},{id:"human-body",name_ar:"جسم الإنسان",name_en:"Human Body",name_he:"גוף האדם"}];function Rt(e){ve=e}async function Ut(){const e=document.getElementById("alphabet-press-language-select"),t=document.getElementById("alphabet-press-category-select"),o=document.getElementById("alphabet-press-voice-select"),s=document.getElementById("alphabet-press-play-audio-sidebar");!e||!t||!o||!s||(e.innerHTML="",["ar","en","he"].forEach(a=>{const n=document.createElement("option");n.value=a,n.textContent={ar:"العربية",en:"English",he:"עברית"}[a],e.appendChild(n)}),e.value=r,t.innerHTML="",Ve.forEach(a=>{const n=document.createElement("option");n.value=a.id,n.textContent=a["name_"+r],t.appendChild(n)}),t.value=F,o.innerHTML=`
        <option value="teacher">المعلم</option>
        <option value="boy">صوت ولد</option>
        <option value="girl">صوت بنت</option>
        <option value="child">صوت طفل</option>
    `,o.value=ve,e.addEventListener("change",async()=>{await D(e.value),_(),O(e.value),Array.from(t.options).forEach(a=>{const n=Ve.find(i=>i.id===a.value);n&&(a.textContent=n["name_"+e.value])}),Yt(e.value)}),t.addEventListener("change",()=>{Qt(t.value)}),o.addEventListener("change",()=>{Rt(o.value)}),s.addEventListener("click",()=>{Kt()}))}async function zt(){const e=document.querySelector(".main-content");try{const t=await fetch("/html/alphabet-press.html");if(!t.ok)throw new Error(`Failed to load html: ${t.statusText}`);e.innerHTML=await t.text()}catch(t){console.error(t),e.innerHTML="<p style='color:red;'>فشل تحميل اللعبة.</p>";return}lt(r),Be(),await Fe(F),_()}function Kt(){if(!de)return;const e=ct(de,ve,F);if(e){E(e);const t=JSON.parse(localStorage.getItem("user"));t&&I(t,F)}}async function Yt(e){lt(r),Be(),await Fe(F)}async function Qt(e){F=e,await Fe(e),Be()}function lt(e){const t=document.getElementById("alphabet-keyboard");t&&(t.innerHTML="",(Wt[e]||[]).forEach(o=>{const s=document.createElement("button");s.className="keyboard-button",s.textContent=o,s.onclick=()=>Xt(o),t.appendChild(s)}))}async function Fe(e){se("جارٍ التحميل...","info");try{const t=N($,"categories",e,"items"),o=Z(t);ae=(await q(o)).docs.map(a=>a.data()),He(),ae.length===0&&se("لا توجد عناصر لهذه الفئة.","warning")}catch(t){console.error(t),se("فشل تحميل العناصر.","error"),ae=[]}}function Xt(e){p();const t=ae.filter(o=>{var s,a;return((a=(s=o.letter)==null?void 0:s[r])==null?void 0:a.toLowerCase())===e.toLowerCase()});if(t.length>0){const o=t[Math.floor(Math.random()*t.length)];Zt(o)}else Be(),se(`لا يوجد عنصر يبدأ بالحرف "${e}"`,"warning")}function Zt(e){var i;de=e;const t=document.getElementById("alphabet-press-image"),o=document.getElementById("alphabet-press-item-name"),s=((i=e.name)==null?void 0:i[r])||"";t&&(t.src=`/images/${F}/${e.image}`,t.alt=s),o&&(o.innerHTML=s?`<span class="highlight-first-letter">${s[0]}</span>${s.slice(1)}`:"");const a=ct(e,ve,F);if(a){E(a);const l=JSON.parse(localStorage.getItem("user"));l&&I(l,F)}const n=document.getElementById("item-display-area");n&&(n.style.display="flex"),He()}function ct(e,t,o){var l;const s=r,a=`${t}_${s}`,n=`/audio/${s}/${o}/`;let i=null;if(e.voices&&e.voices[a])i=e.voices[a];else if(e.sound_base)i=`${e.sound_base}_${t}_${s}.mp3`;else return console.warn(`🔇 لا يوجد ملف صوت للعنصر: ${(l=e.name)==null?void 0:l[s]}`),null;return`${n}${i}`}function Be(){const e=document.getElementById("item-display-area");e&&(e.style.display="none"),de=null,p(),He()}function se(e,t){const o=document.getElementById("game-message");o&&(o.querySelector("p").textContent=e,o.style.display="block",o.className="info-box",o.style.backgroundColor={info:"var(--color-info)",warning:"var(--color-warning)",error:"var(--color-danger)"}[t]||"var(--color-info)",o.style.color=t==="warning"?"var(--color-text-primary)":"var(--color-white)")}function He(){const e=document.getElementById("game-message");e&&(e.style.display="none")}let ie,le,Y,ce,Q,H,rt=[],R=[],$e=0,me=!1,oe={},B="animals",k="image-image";async function Dt(){console.log("جارٍ تحميل محتوى لعبة الذاكرة...");const e=document.querySelector(".main-content");e.innerHTML=`

        <div class="memory-game-grid" id="memory-game-board">
            </div>
        <div class="game-status" id="memory-game-status">
            </div>
    `,ie=document.getElementById("memory-game-board"),H=document.getElementById("memory-game-status"),await nn()}async function en(){console.log("Initializing Memory Game Sidebar Controls..."),le=document.getElementById("memory-game-start-button"),Y=document.getElementById("memory-game-lang-select"),ce=document.getElementById("memory-game-topic-select"),Q=document.getElementById("memory-game-mode-select"),tn(),Y&&(Y.value=r),Q&&(Q.value=k),Object.keys(oe).length>0?ut():console.log("allCardData is empty, populateTopicOptions will be called after fetchCardData.")}function tn(){le&&(le.removeEventListener("click",te),le.addEventListener("click",te)),Y&&(Y.removeEventListener("change",Je),Y.addEventListener("change",Je)),ce&&(ce.removeEventListener("change",je),ce.addEventListener("change",je)),Q&&(Q.removeEventListener("change",We),Q.addEventListener("change",We))}function Je(e){D(e.target.value).then(()=>{O(e.target.value),ln()})}function je(e){B=e.target.value,te()}function We(e){k=e.target.value,te()}function X(e,t){if(t==="name"){if(r==="ar")return e.name_ar;if(r==="en")return e.name_en;if(r==="he")return e.name_he}else if(t==="letter"){if(r==="ar")return e.letter_ar;if(r==="en")return e.letter_en;if(r==="he")return e.letter_he}else if(t==="audio"){if(r==="ar")return e.audio_ar;if(r==="en")return e.audio_en;if(r==="he")return e.audio_he}return""}async function nn(){if(!$){console.error("Firestore DB not initialized. Cannot fetch data."),H.textContent=r==="ar"?"فشل إعداد قاعدة البيانات.":"Database setup failed.";return}try{const e=await q(N($,"categories")),t={};for(const o of e.docs){const s=o.id,a=N($,"categories",s,"items"),n=await q(a);t[s]=n.docs.map(i=>{const l=i.data();return{id:i.id,image_name:l.image,name_ar:l.name.ar,name_en:l.name.en,name_he:l.name.he||"",letter_ar:l.letter?l.letter.ar:"",letter_en:l.letter?l.letter.en:"",letter_he:l.letter?l.letter.he:"",audio_ar:l.voices&&l.voices.ar?l.voices.ar:"",audio_en:l.voices&&l.voices.en?l.voices.en:"",audio_he:l.voices&&l.voices.he?l.voices.he:""}})}oe=t,ut(),te()}catch(e){console.error("فشل في جلب بيانات البطاقات من Firestore:",e),H.textContent=r==="ar"?"فشل تحميل البيانات. تحقق من اتصال الإنترنت.":"Failed to load data. Check internet connection."}}function Re(e){for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}function te(){if(!ie){console.error("Game board element not found in createBoard.");return}ie.innerHTML="",H.textContent="",R=[],$e=0,me=!1;const e=oe[B];if(!e||e.length<6){console.warn(`لا توجد بيانات كافية للموضوع ${B} أو الموضوع غير موجود.`),H.textContent=r==="ar"?"لا توجد بيانات كافية لهذا الموضوع.":"Not enough data for this topic.";return}const o=Re([...e]).slice(0,6),s=[];if(o.forEach(n=>{const i={text_ar:n.name_ar,text_en:n.name_en,text_he:n.name_he};k==="image-image"?(s.push({type:"image",value:`images/${B}/${n.image_name}`,id:n.id,...i}),s.push({type:"image",value:`images/${B}/${n.image_name}`,id:n.id,...i})):k==="image-word"?n.name_he?(s.push({type:"image",value:`images/${B}/${n.image_name}`,id:n.id,...i}),s.push({type:"word",value:X(n,"name"),id:n.id,...i})):console.warn(`لا يوجد اسم عبري لـ ${n.id} في الموضوع ${B}. سيتم تخطي هذا العنصر لهذا النمط.`):k==="image-char"?n.letter_ar&&n.letter_en&&n.letter_he?(s.push({type:"image",value:`images/${B}/${n.image_name}`,id:n.id,...i}),s.push({type:"char",value:X(n,"letter"),id:n.id,...i})):console.warn(`لا يوجد حرف لـ ${n.id} في الموضوع ${B} لجميع اللغات المطلوبة. سيتم تخطي هذا العنصر لهذا النمط.`):k==="image-audio"&&(n.audio_ar&&n.audio_en&&n.audio_he?(s.push({type:"image",value:`images/${B}/${n.image_name}`,id:n.id,...i}),s.push({type:"audio",value:`audio/${r}/${B}/${X(n,"audio")}`,id:n.id,...i,image_url_for_audio_card:`images/${B}/${n.image_name}`})):console.warn(`لا يوجد صوت لـ ${n.id} في الموضوع ${B} لجميع اللغات المطلوبة. سيتم تخطي هذا العنصر لهذا النمط.`))}),s.length<12){H.textContent=r==="ar"?"لا توجد عناصر كافية لهذا النمط والموضوع.":"Not enough items for this mode and topic.",console.error("Not enough cards generated for the selected mode. Generated:",s.length);return}Re(s).forEach(n=>{const i=document.createElement("div");i.classList.add("memory-card"),i.dataset.cardId=n.id,i.dataset.cardType=n.type;let l="";if(n.type==="image"?l=`<img src="${n.value}" alt="${n.id}">`:n.type==="word"||n.type==="char"?l=`<span class="card-display-text">${n.value}</span>`:n.type==="audio"&&(l=`
                <img src="${n.image_url_for_audio_card}" alt="${n.id}">
                <audio src="${n.value}" preload="auto"></audio>
                <button class="play-audio-btn">▶</button>
            `),i.innerHTML=`
            <div class="front-face">
                ${l}
            </div>
            <div class="back-face"></div>
        `,n.type==="word"||n.type==="char"){const d=i.querySelector(".card-display-text");d&&(r==="he"?d.style.direction="rtl":d.style.direction="ltr")}if(n.type==="audio"){const d=i.querySelector(".play-audio-btn");d&&d.addEventListener("click",c=>{c.stopPropagation();const m=i.querySelector("audio");m&&E(m.src)})}i.addEventListener("click",dt),ie.appendChild(i)}),rt=document.querySelectorAll(".memory-card")}function dt(){if(!me&&this!==R[0]&&!this.classList.contains("matched")){if(this.classList.add("flipped"),R.push(this),this.dataset.cardType==="audio"){const e=this.querySelector("audio");e&&E(e.src)}R.length===2&&(me=!0,on())}}function on(){const[e,t]=R,o=e.dataset.cardId,s=t.dataset.cardId,a=e.dataset.cardType,n=t.dataset.cardType;let i=!1;if(o===s&&(k==="image-image"?i=a==="image"&&n==="image":k==="image-word"?i=a==="image"&&n==="word"||a==="word"&&n==="image":k==="image-char"?i=a==="image"&&n==="char"||a==="char"&&n==="image":k==="image-audio"&&(i=a==="image"&&n==="audio"||a==="audio"&&n==="image")),i){an(),$e++,H.textContent=r==="ar"?"لقد وجدت زوجًا!":r==="he"?"מצאת זוג!":"You found a pair!";const l=JSON.parse(localStorage.getItem("user"));l&&I(l,B),$e===6&&setTimeout(()=>{H.textContent=r==="ar"?"تهانينا! لقد فزت باللعبة!":r==="he"?"מזל טוב! ניצחת במשחק!":"Congratulations! You won the game!"},500)}else sn(),H.textContent=r==="ar"?"حاول مرة أخرى.":r==="he"?"נסה שוב.":"Try again."}function an(){R.forEach(e=>{e.removeEventListener("click",dt),e.classList.add("matched")}),mt()}function sn(){setTimeout(()=>{R.forEach(e=>e.classList.remove("flipped")),mt()},1e3)}function mt(){[R,me]=[[],!1]}function ln(){rt.forEach(e=>{const t=e.dataset.cardId,o=e.dataset.cardType,s=oe[B],a=s?s.find(n=>n.id===t):null;if(a){const n=e.querySelector(".card-display-text");if(n&&(o==="word"?n.textContent=X(a,"name"):o==="char"&&(n.textContent=X(a,"letter")),(o==="word"||o==="char")&&(r==="he"?n.style.direction="rtl":n.style.direction="ltr")),o==="audio"){const i=e.querySelector("audio");i&&(i.src=`audio/${r}/${B}/${X(a,"audio")}`)}}})}function ut(){const e=document.getElementById("memory-game-topic-select");if(!e){console.error("Topic select element not found in memory game sidebar controls.");return}e.innerHTML="",Object.keys(oe).forEach(o=>{const s=document.createElement("option");s.value=o,s.textContent=o.charAt(0).toUpperCase()+o.slice(1),e.appendChild(s)}),e.value=B}let _e=[],gt=[],z=null;async function ft(){p();const e=document.querySelector("main.main-content");e.innerHTML=`
    <section class="tools-match-game-section">
      <h2 data-i18n="tools_match_title">من صاحب الأداة؟</h2>
      <div class="tool-display"></div>
      <div id="profession-options" class="options-grid"></div>
      <div id="result-message" class="result-message"></div>
      <button id="next-button" class="next-btn" style="display:none" data-i18n="next">التالي</button>
    </section>
  `,_(),await cn(),Ue(),document.getElementById("next-button").onclick=Ue;const t=document.getElementById("tools-match-replay-sound-btn");t&&(t.onclick=()=>{var n,i;const o=yt(),s=Ee(),a=(i=(n=z==null?void 0:z.sound)==null?void 0:n[s])==null?void 0:i[o];a&&E(a)})}async function cn(){_e=(await q(N($,"profession_tools"))).docs.map(o=>({id:o.id,...o.data()}));const t=new Set;_e.forEach(o=>(o.professions||[]).forEach(s=>t.add(s))),gt=Array.from(t)}function Ue(){document.getElementById("result-message").textContent="",document.getElementById("next-button").style.display="none",z=ht(_e),rn(z),dn(z)}function rn(e){var n,i,l,d;const t=document.querySelector(".tool-display"),o=pt(),s=Ee(),a=yt();if(t.innerHTML="",o.startsWith("image")){const c=document.createElement("img");c.src="/"+e.image_path,c.alt=((n=e.name)==null?void 0:n[s])||"",c.classList.add("tool-image"),c.onclick=()=>{var g,y;const m=(y=(g=e.sound)==null?void 0:g[s])==null?void 0:y[a];m&&E(m)},t.appendChild(c)}if(o.startsWith("text")){const c=document.createElement("div");c.textContent=((i=e.name)==null?void 0:i[s])||"؟",c.classList.add("tool-name"),c.onclick=()=>{var g,y;const m=(y=(g=e.sound)==null?void 0:g[s])==null?void 0:y[a];m&&E(m)},t.appendChild(c)}if(o.startsWith("sound")){const c=(d=(l=e.sound)==null?void 0:l[s])==null?void 0:d[a];c&&E(c)}}async function dn(e){var n,i;const t=ht(e.professions),o=un(gt.filter(l=>!e.professions.includes(l)),3),s=bt([t,...o]),a=document.getElementById("profession-options");a.innerHTML="";for(const l of s){const d=document.createElement("button");d.className="option-btn";const c=await Ke(ze($,"professions",l));if(!c.exists())continue;const m=c.data(),g=Ee();if(pt().endsWith("image")){const u=document.createElement("img");u.src="/"+m.image_path,u.alt=((n=m.name)==null?void 0:n[g])||l,u.style.width="100px",d.appendChild(u)}else d.textContent=((i=m.name)==null?void 0:i[g])||l;d.onclick=()=>mn(l,t),a.appendChild(d)}}function mn(e,t){var a;const o=document.getElementById("result-message"),s=document.getElementById("next-button");e===t?(o.textContent="إجابة صحيحة!",o.style.color="green",E("audio/common/correct.mp3")):(o.textContent="إجابة خاطئة!",o.style.color="red",E("audio/common/wrong.mp3")),I("tools-match",{tool:(a=z.name)==null?void 0:a[Ee()],selected:e,correct:t,success:e===t}),s.style.display="inline-block"}function Ee(){var e;return((e=document.getElementById("tools-match-lang-select"))==null?void 0:e.value)||r}function yt(){var e;return((e=document.getElementById("tools-match-voice-select"))==null?void 0:e.value)||"boy"}function pt(){var e;return((e=document.getElementById("tools-match-display-mode"))==null?void 0:e.value)||"image-text"}function ht(e){return e[Math.floor(Math.random()*e.length)]}function un(e,t){return bt([...e]).slice(0,t)}function bt(e){return e.sort(()=>Math.random()-.5)}window.loadToolsMatchGameContent=ft;const K=document.querySelector("main.main-content"),ue=document.getElementById("animal-sidebar-controls"),ge=document.getElementById("fruit-sidebar-controls"),fe=document.getElementById("vegetable-sidebar-controls"),ye=document.getElementById("human-body-sidebar-controls"),pe=document.getElementById("alphabet-press-sidebar-controls"),ne=document.getElementById("memory-game-sidebar-controls"),he=document.getElementById("tools-sidebar-controls"),be=document.getElementById("profession-sidebar-controls"),h=document.getElementById("welcome-message"),b=document.getElementById("home-topic-cards");window.loadToolsMatchPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none");try{const t=await(await fetch("/html/tools-match.html")).text();K.innerHTML=t,await ft()}catch(e){K.innerHTML="<p>تعذر تحميل اللعبة</p>",console.error(e)}};window.loadLogin=async()=>{w();try{const e=await fetch("/users/login-form.html");if(!e.ok)throw new Error("Failed to load login form");const t=await e.text();K.innerHTML=t}catch(e){console.error("Error loading login form:",e),K.innerHTML='<p style="color: red;">تعذر تحميل نموذج تسجيل الدخول. يرجى المحاولة لاحقاً.</p>'}};window.loadRegister=async()=>{w();try{const e=await fetch("/users/register-form.html");if(!e.ok)throw new Error("Failed to load register form");const t=await e.text();K.innerHTML=t}catch(e){console.error("Error loading register form:",e),K.innerHTML='<p style="color: red;">تعذر تحميل نموذج التسجيل. يرجى المحاولة لاحقاً.</p>'}};window.loadProfile=()=>{xt(),w()};window.loadAnimalsPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await Qe(),gn(),ee("animal")};window.loadFruitsPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await ke(),yn(),ee("fruit")};window.loadVegetablesPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await Pe(),hn(),ee("vegetable")};window.loadHumanBodyPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await ot(),vn(),ee("human-body")};window.loadProfessionsPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await Ye(),be&&(be.style.display="block"),ee("profession")};window.loadAlphabetPressPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),En(),await Ut(),await zt()};window.loadMemoryGamePage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),ne?(await en(),Cn()):console.error("Memory game sidebar controls not found. Cannot initialize."),await Dt()};window.showHomePage=()=>{K.innerHTML=`
            <h2 id="welcome-message-inner" style="display: block;">مرحبًا بك في الموسوعة!</h2>
            <div id="home-topic-cards-inner" class="home-cards-container">
                <a href="#" class="topic-card animals" onclick="loadAnimalsPage(); return false;">
                    <span class="icon">🐾</span>
                    <h3>الحيوانات</h3>
                </a>
                <a href="#" class="topic-card fruits" onclick="loadFruitsPage(); return false;">
                    <span class="icon">🍎</span>
                    <h3>الفواكه</h3>
                </a>
                <a href="#" class="topic-card vegetables" onclick="loadVegetablesPage(); return false;">
                    <span class="icon">🥦</span>
                    <h3>الخضروات</h3>
                </a>
                <a href="#" class="topic-card human-body" onclick="loadHumanBodyPage(); return false;">
                    <span class="icon">🧠</span>
                    <h3>جسم الإنسان</h3>
                </a>
                <a href="#" class="topic-card games" onclick="loadAlphabetPressPage(); return false;">
                    <span class="icon">🔠</span>
                    <h3>لعبة الحروف</h3> </a>
                <a href="#" class="topic-card games" onclick="loadMemoryGamePage(); return false;">
                    <span class="icon">🧠</span>
                    <h3>لعبة الذاكرة</h3>
                </a>
				
						<a href="#" class="topic-card professions" onclick="loadProfessionsPage(); return false;">
						<span class="icon">👷‍♂️</span>
						<h3>المهن</h3>
						</a>
					</div>
				  `,w();const e=localStorage.getItem("lang")||"ar";O(e)};function gn(){ue&&(ue.style.display="block")}function fn(){ue&&(ue.style.display="none")}function yn(){ge&&(ge.style.display="block")}function pn(){ge&&(ge.style.display="none")}function hn(){fe&&(fe.style.display="block")}function bn(){fe&&(fe.style.display="none")}function vn(){ye&&(ye.style.display="block")}function Bn(){ye&&(ye.style.display="none")}function En(){pe&&(pe.style.display="block")}function In(){pe&&(pe.style.display="none")}function Cn(){ne&&(ne.style.display="block")}function wn(){ne&&(ne.style.display="none")}function w(){fn(),pn(),bn(),Bn(),In(),wn(),xn(),be&&(be.style.display="none")}async function ee(e){let t,o,s,a,n,i,l,d,c,m,g,y;switch(e){case"animal":t=document.getElementById("game-lang-select-animal"),o=document.getElementById("voice-select-animal"),s=document.getElementById("play-sound-btn-animal"),a=document.getElementById("prev-animal-btn"),n=document.getElementById("next-animal-btn"),i=Qe,l=St,d=kt,c=Lt,m=document.getElementById("toggle-baby-image-btn"),g=document.getElementById("play-baby-sound-btn-animal"),y=Pt;break;case"fruit":t=document.getElementById("game-lang-select-fruit"),o=document.getElementById("voice-select-fruit"),s=document.getElementById("play-sound-btn-fruit"),a=document.getElementById("prev-fruit-btn"),n=document.getElementById("next-fruit-btn"),i=ke,l=Xe,d=Ze,c=De;break;case"vegetable":t=document.getElementById("game-lang-select-vegetable"),o=document.getElementById("voice-select-vegetable"),s=document.getElementById("play-sound-btn-vegetable"),a=document.getElementById("prev-vegetable-btn"),n=document.getElementById("next-vegetable-btn"),i=Pe,l=et,d=tt,c=nt;break;case"human-body":t=document.getElementById("game-lang-select-human-body"),o=document.getElementById("voice-select-human-body"),s=document.getElementById("play-sound-btn-human-body"),a=document.getElementById("prev-human-body-btn"),n=document.getElementById("next-human-body-btn"),i=ot,l=qt,d=Ot,c=Gt;break;case"profession":t=document.getElementById("game-lang-select-profession"),o=document.getElementById("voice-select-profession"),s=document.getElementById("play-sound-btn-profession");const u=document.getElementById("toggle-description-btn-profession");u&&(u.onclick=()=>{const C=document.getElementById("profession-description-box");C.style.display=C.style.display==="none"?"block":"none"}),a=document.getElementById("prev-profession-btn"),n=document.getElementById("next-profession-btn"),i=Ye,l=It,d=Ct,c=wt;break;case"tools":t=document.getElementById("game-lang-select-tools"),o=document.getElementById("voice-select-tools"),s=document.getElementById("play-sound-btn-tools"),a=document.getElementById("prev-tools-btn"),n=document.getElementById("next-tools-btn"),i=Ae,l=at,d=st,c=it;const f=document.getElementById("toggle-description-btn-tools");f&&(f.onclick=()=>{const C=document.getElementById("tool-description-box");C&&(C.style.display=C.style.display==="none"?"block":"none")});break;default:return}if(!t||!o){console.error(`عناصر التحكم لنوع الموضوع '${e}' لم يتم العثور عليها في DOM.`);return}t.options.length===0&&(["ar","en","he"].forEach(u=>{const f=document.createElement("option");f.value=u,f.textContent={ar:"العربية",en:"English",he:"עברית"}[u],t.appendChild(f)}),t.value=r),o.options.length===0&&(["teacher","boy","girl","child"].forEach(u=>{const f=document.createElement("option");f.value=u,f.textContent={teacher:"المعلم",boy:"صوت ولد",girl:"صوت بنت",child:"صوت طفل"}[u],o.appendChild(f)}),o.value="teacher"),t.onchange=async()=>{const u=t.value;await D(u),_(),O(u),await i()},o.onchange=()=>{},s&&(s.onclick=()=>{c()}),a&&(a.onclick=()=>{d()}),n&&(n.onclick=()=>{l()}),m&&(m.onclick=()=>{const u=document.getElementById("animal-details-section"),f=u?u.querySelector(".baby-animal-section"):null;f&&(f.style.display=f.style.display==="none"?"block":"none")}),g&&(g.onclick=()=>{y()}),_()}window.loadToolsPage=async()=>{w(),h&&(h.style.display="none"),b&&(b.style.display="none"),await Ae(),he&&(he.style.display="block"),ee("tools")};document.addEventListener("DOMContentLoaded",()=>{window.showHomePage()});function xn(){he&&(he.style.display="none")}
//# sourceMappingURL=main-a1bd932b.js.map
